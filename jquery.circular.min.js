/*
 *  jquery-circular - v1.0.0
 *  A jQuery Circle Chart
 *  http://www.circular.cabcom13.de
 *
 *  Made by Sven Schmalfuß
 *  Under MIT License
 */
!function(a){"use strict";a.fn.circular=function(b){if(this.length>1)return this.each(function(){a(this).circular(b)}),this;var c=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=c;var d={style:"full",radius:150,targetpercent:0,velocity:10,background:"rgba(21,21,21,.05)","border-radius":1,"border-color":"rgba(21,21,21,.5)","border-style":"solid",infocircle:{"background-color":"#BDC3C7","shadow-color":"rgba(21, 21, 21,.3)",blur:10,shadowOffsetX:0,shadowOffsetY:0},datacircle:{innercolor:"#AAD138",outercolor:"#83A324"},text:"Verfügbar",state_percent:0,onSuccess:function(){},onInit:function(){},onDraw:function(){},onDestroy:function(){}};b=a.extend({},d,b);var e,f=a(this),g=f[0].getContext("2d"),h=f[0].width/2,i=f[0].height/2,j=b.radius;e="half"===b.style?Math.PI:2*Math.PI;var k,l=b.initPercentValue,m=j/2,n=(j-m)*l/100+m,o=function(){k=requestAnimationFrame(o),b.state_percent=Math.round(100*(2*(n-m))/j),b.onDraw(b.state_percent),b.state_percent===b.targetpercent?(cancelAnimationFrame(k),b.onSuccess(b.state_percent)):b.targetpercent<b.state_percent?n-=.125*b.velocity:n+=.125*b.velocity,g.globalCompositeOperation="source-over",g.clearRect(0,0,f[0].height,f[0].width),g.beginPath(),g.arc(h,i,j,0,e,!0),g.closePath(),g.fillStyle=b.background,g.strokeStyle=b["border-color"],g.lineWidth=b["border-radius"],"dashed"===b["border-style"]?g.setLineDash([10,5,10,5]):"dotted"===b["border-style"]?g.setLineDash([2,2,2,2]):g.setLineDash([0,0,0,0]),0!==b["border-radius"]&&g.stroke(),g.fill(),g.beginPath(),g.arc(h,i,n,0,e,!0),g.arc(h,i,m,0,e,!0),g.closePath(),g.lineWidth=2,g.shadowColor="transparent",g.strokeStyle=b.datacircle.outercolor,g.stroke();var a=g.createRadialGradient(h,i,75,h,i,150);a.addColorStop(0,b.datacircle.innercolor),a.addColorStop(1,b.datacircle.outercolor),g.fillStyle=a,g.shadowColor="transparent",g.fill(),g.beginPath(),g.arc(h,i,m,0,e,!0),g.closePath(),g.fillStyle=b.infocircle["background-color"],g.shadowColor=b.infocircle["shadow-color"],g.shadowBlur=b.infocircle.blur,g.shadowOffsetX=b.infocircle.shadowOffsetX,g.shadowOffsetY=b.infocircle.shadowOffsetY,g.fill(),g.beginPath(),g.shadowBlur=0,g.shadowOffsetX=0,g.shadowOffsetY=0,g.font="15px Arial",g.fillStyle="#212121",g.textAlign="center","half"===b.style?g.fillText(b.text.toUpperCase(),h,i-b.radius/5):g.fillText(b.text.toUpperCase(),h,i),g.closePath(),g.shadowBlur=0,g.font="bold 15px Arial",g.fillStyle="#212121",g.textAlign="center","half"===b.style?g.fillText(l+"%",h,i-b.radius/5+20):g.fillText(l+"%",h,i+20)},p=function(){g.clearRect(0,0,f[0].height,f[0].width),g.globalCompositeOperation="source-over",b.state_percent=l,g.clearRect(0,0,f[0].height,f[0].width),g.beginPath();g.arc(h,i,j,0,e,!0);g.closePath(),g.fillStyle=b.background,g.strokeStyle=b["border-color"],g.lineWidth=b["border-radius"],"dashed"===b["border-style"]?g.setLineDash([10,5,10,5]):"dotted"===b["border-style"]?g.setLineDash([2,2,2,2]):g.setLineDash([0,0,0,0]),0!==b["border-radius"]&&g.stroke(),g.fill(),g.beginPath(),g.arc(h,i,n,0,e,!0),g.arc(h,i,m,0,e,!0),g.closePath(),g.lineWidth=2,g.shadowColor="transparent",g.strokeStyle=b.datacircle.outercolor,g.stroke();var a=g.createRadialGradient(h,i,75,h,i,150);a.addColorStop(0,b.datacircle.innercolor),a.addColorStop(1,b.datacircle.outercolor),g.fillStyle=a,g.fill(),g.beginPath(),g.arc(h,i,m,0,e,!0),g.closePath(),g.fillStyle=b.infocircle["background-color"],g.shadowColor=b.infocircle["shadow-color"],g.shadowBlur=b.infocircle.blur,g.shadowOffsetX=b.infocircle.shadowOffsetX,g.shadowOffsetY=b.infocircle.shadowOffsetY,g.fill(),g.beginPath(),g.shadowBlur=0,g.shadowOffsetX=0,g.shadowOffsetY=0,g.font="15px Arial",g.fillStyle="#212121",g.textAlign="center","half"===b.style?g.fillText(b.text.toUpperCase(),h,i-b.radius/5):g.fillText(b.text.toUpperCase(),h,i),g.closePath(),g.shadowBlur=0,g.font="bold 15px Arial",g.fillStyle="#212121",g.textAlign="center","half"===b.style?g.fillText(l+"%",h,i-b.radius/5+20):g.fillText(l+"%",h,i+20),b.onInit.call()};return this.destroy=function(){g.clearRect(0,0,f[0].height,f[0].width),b.onDestroy()},this.initialize=function(){return p(),this.bind("onSuccess",function(){return b.state_percent})},this.getStat=function(){return b.state_percent},this.setBar=function(a){b.targetpercent=a,cancelAnimationFrame(k),o()},this.initialize()}}(jQuery);
